platform :ios do

  desc %(Run tests:
    - Validate podspec
    - synx - to check if xcodeproj has proper group structure
    - Mobile-ios-sdk unit tests
  )
  lane :tests do 
    pod_lib_lint

    project = "Meniga/Meniga-ios-sdk.xcodeproj"

    synx(
      xcodeproj: project,
      exclusion: "Podspec metadata"
    )

    ensure_no_changes(
      path: project,
      show_diff: true
    )

    run_tests(
      project: project,
      scheme: "Meniga-ios-sdk",
      device: "iPhone 8",
      clean: true
    )
  end
end
